sudo: false
language: perl
perl:
  - '5.28'
  - '5.26'
  - '5.24'
  - '5.22'
  - '5.20'
  - '5.18'
  - '5.16'
  - '5.14'
install:
  - wget -P ~/bin https://git.io/cpm
  - chmod +x ~/bin/cpm
  - for i in exercises/*/.meta/solutions; do cd $i; if [ -f cpanfile ]; then echo "$i"; cpm install; fi; cd - > /dev/null; done
before_script:
  - git clone https://github.com/exercism/problem-specifications.git
  - bin/fetch-configlet
script:
  - bin/configlet lint . --track-id=perl5
  - prove exercises/*/.meta/solutions/
    --recurse
    --directives
  - cpm install
  - perl -Ilocal/lib/perl5 local/bin/yath test exercises/*/.meta/solutions/
    --jobs 2
  - TS_MAX_DELTA=3 perl -Ilocal/lib/perl5 local/bin/yath test t/
    --verbose
